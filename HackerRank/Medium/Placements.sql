/*
- best friend? ???? ? ?? ??? ?? ??? ??? ??. 
- ??? ??? ???? ????? ? 
- students ???? friends ???(left join student.id = friends.id) ??? ??
- ??? friends.id = packages.id ??? ????? '??'? ??? ? ? ?? 
- student.iid - packages.id ??? '?'? ??? ? ? ??
- WHERE? 3,4?? ??? ??
*/
SELECT
    X.Name
FROM(
SELECT 
    A.Name,
    B.Friend_ID,
    C.Salary AS BFF_Sal,
    D.Salary AS My_Sal
FROM Students A
    JOIN Friends B 
        ON A.ID = B.ID
            JOIN Packages C
                ON B.Friend_ID = C.ID
                    JOIN Packages D
                        ON A.ID = D.ID
) X
WHERE X.BFF_Sal > X.My_Sal
ORDER BY X.BFF_Sal